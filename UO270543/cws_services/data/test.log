/*C2*/SET SCHEMA PUBLIC
DISCONNECT
/*C3*/SET SCHEMA PUBLIC
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_MECHANIC_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_VEHICLE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_INVOICE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT UNQ_TWORKORDERS_0
ALTER TABLE TCreditcards DROP CONSTRAINT FK_TCreditcards_ID
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TClients
DROP TABLE TVehicletypes
DROP TABLE TWORKORDERS
DROP TABLE TCreditcards
DROP TABLE TInvoices
DROP TABLE TSpareparts
DROP TABLE TVouchers
DROP TABLE TSubstitutions
DROP TABLE TCashes
DROP TABLE TCharges
DROP TABLE TVehicles
DROP TABLE TMechanics
CREATE TABLE TInterventions (ID VARCHAR(36) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(36), WORKORDER_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(36) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPAYROLLS (ID VARCHAR(36) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPROFESSIONALGROUPS (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicletypes (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TWORKORDERS (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATE VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), VEHICLE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCreditcards (ID VARCHAR(36) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATE VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACTTYPES (ID VARCHAR(36) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(36) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACT (ID VARCHAR(36) NOT NULL, ANNUALWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), PROFESSIONALGROUP_ID VARCHAR(36), FIREDMECHANIC_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(36) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(36) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(36), SPAREPART_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(36) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(36) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(36), PAYMENTMEAN_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(36) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(36), VEHICLETYPE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, INFORCECONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (DATE, MECHANIC_ID, WORKORDER_ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_2 UNIQUE (DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TPROFESSIONALGROUPS ADD CONSTRAINT UNQ_TPROFESSIONALGROUPS_1 UNIQUE (NAME)
ALTER TABLE TVehicletypes ADD CONSTRAINT UNQ_TVehicletypes_1 UNIQUE (NAME)
ALTER TABLE TWORKORDERS ADD CONSTRAINT UNQ_TWORKORDERS_0 UNIQUE (DATE, VEHICLE_ID)
ALTER TABLE TCreditcards ADD CONSTRAINT UNQ_TCreditcards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TCONTRACTTYPES ADD CONSTRAINT UNQ_TCONTRACTTYPES_2 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TCONTRACT ADD CONSTRAINT UNQ_TCONTRACT_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (PAYMENTMEAN_ID, INVOICE_ID)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWORKORDERS (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT FK_TPAYROLLS_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TCONTRACT (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TCreditcards ADD CONSTRAINT FK_TCreditcards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TPROFESSIONALGROUPS (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TCONTRACTTYPES (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicletypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TMechanics ADD CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID FOREIGN KEY (INFORCECONTRACT_ID) REFERENCES TCONTRACT (ID)
DISCONNECT
/*C4*/SET SCHEMA PUBLIC
DISCONNECT
/*C5*/SET SCHEMA PUBLIC
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT FK_TPAYROLLS_CONTRACT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT UNQ_TPAYROLLS_0
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_MECHANIC_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_VEHICLE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_INVOICE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT UNQ_TWORKORDERS_0
ALTER TABLE TCreditcards DROP CONSTRAINT FK_TCreditcards_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_MECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT UNQ_TCONTRACT_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TMechanics DROP CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TPAYROLLS
DROP TABLE TClients
DROP TABLE TPROFESSIONALGROUPS
DROP TABLE TVehicletypes
DROP TABLE TWORKORDERS
DROP TABLE TCreditcards
DROP TABLE TInvoices
DROP TABLE TCONTRACTTYPES
DROP TABLE TSpareparts
DROP TABLE TCONTRACT
DROP TABLE TVouchers
DROP TABLE TSubstitutions
DROP TABLE TCashes
DROP TABLE TCharges
DROP TABLE TVehicles
DROP TABLE TMechanics
CREATE TABLE TInterventions (ID VARCHAR(36) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(36), WORKORDER_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(36) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPAYROLLS (ID VARCHAR(36) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPROFESSIONALGROUPS (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicletypes (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TWORKORDERS (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATE VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), VEHICLE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCreditcards (ID VARCHAR(36) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATE VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACTTYPES (ID VARCHAR(36) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(36) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACT (ID VARCHAR(36) NOT NULL, ANNUALWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), PROFESSIONALGROUP_ID VARCHAR(36), FIREDMECHANIC_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(36) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(36) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(36), SPAREPART_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(36) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(36) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(36), PAYMENTMEAN_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(36) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(36), VEHICLETYPE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, INFORCECONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (DATE, MECHANIC_ID, WORKORDER_ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_2 UNIQUE (DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TPROFESSIONALGROUPS ADD CONSTRAINT UNQ_TPROFESSIONALGROUPS_1 UNIQUE (NAME)
ALTER TABLE TVehicletypes ADD CONSTRAINT UNQ_TVehicletypes_1 UNIQUE (NAME)
ALTER TABLE TWORKORDERS ADD CONSTRAINT UNQ_TWORKORDERS_0 UNIQUE (DATE, VEHICLE_ID)
ALTER TABLE TCreditcards ADD CONSTRAINT UNQ_TCreditcards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TCONTRACTTYPES ADD CONSTRAINT UNQ_TCONTRACTTYPES_2 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TCONTRACT ADD CONSTRAINT UNQ_TCONTRACT_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (PAYMENTMEAN_ID, INVOICE_ID)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWORKORDERS (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT FK_TPAYROLLS_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TCONTRACT (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TCreditcards ADD CONSTRAINT FK_TCreditcards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TPROFESSIONALGROUPS (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TCONTRACTTYPES (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicletypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TMechanics ADD CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID FOREIGN KEY (INFORCECONTRACT_ID) REFERENCES TCONTRACT (ID)
INSERT INTO TCONTRACTTYPES VALUES('e2a843f6-4463-4230-94dd-1f4815a852a0',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('7af11852-b43b-473a-bc7b-f2eef1c708be','mechanic-dni','noName','noSurname',1,NULL)
INSERT INTO TPROFESSIONALGROUPS VALUES('b53706e0-d657-4b47-a579-96e05b5b452d','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACT VALUES('b3c9d93e-5f35-442d-a6e4-f21134e11df0',3000.0E0,'2022-11-30',0.0E0,'2022-11-16','TERMINATED',1,'e2a843f6-4463-4230-94dd-1f4815a852a0','7af11852-b43b-473a-bc7b-f2eef1c708be','b53706e0-d657-4b47-a579-96e05b5b452d','7af11852-b43b-473a-bc7b-f2eef1c708be')
COMMIT
DISCONNECT
/*C6*/SET SCHEMA PUBLIC
DISCONNECT
/*C7*/SET SCHEMA PUBLIC
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT FK_TPAYROLLS_CONTRACT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT UNQ_TPAYROLLS_0
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_MECHANIC_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_VEHICLE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_INVOICE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT UNQ_TWORKORDERS_0
ALTER TABLE TCreditcards DROP CONSTRAINT FK_TCreditcards_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_MECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT UNQ_TCONTRACT_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TMechanics DROP CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TPAYROLLS
DROP TABLE TClients
DROP TABLE TPROFESSIONALGROUPS
DROP TABLE TVehicletypes
DROP TABLE TWORKORDERS
DROP TABLE TCreditcards
DROP TABLE TInvoices
DROP TABLE TCONTRACTTYPES
DROP TABLE TSpareparts
DROP TABLE TCONTRACT
DROP TABLE TVouchers
DROP TABLE TSubstitutions
DROP TABLE TCashes
DROP TABLE TCharges
DROP TABLE TVehicles
DROP TABLE TMechanics
CREATE TABLE TInterventions (ID VARCHAR(36) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(36), WORKORDER_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(36) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPAYROLLS (ID VARCHAR(36) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPROFESSIONALGROUPS (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicletypes (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TWORKORDERS (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATE VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), VEHICLE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCreditcards (ID VARCHAR(36) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATE VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACTTYPES (ID VARCHAR(36) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(36) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACT (ID VARCHAR(36) NOT NULL, ANNUALWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), PROFESSIONALGROUP_ID VARCHAR(36), FIREDMECHANIC_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(36) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(36) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(36), SPAREPART_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(36) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(36) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(36), PAYMENTMEAN_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(36) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(36), VEHICLETYPE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, INFORCECONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (DATE, MECHANIC_ID, WORKORDER_ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_2 UNIQUE (DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TPROFESSIONALGROUPS ADD CONSTRAINT UNQ_TPROFESSIONALGROUPS_1 UNIQUE (NAME)
ALTER TABLE TVehicletypes ADD CONSTRAINT UNQ_TVehicletypes_1 UNIQUE (NAME)
ALTER TABLE TWORKORDERS ADD CONSTRAINT UNQ_TWORKORDERS_0 UNIQUE (DATE, VEHICLE_ID)
ALTER TABLE TCreditcards ADD CONSTRAINT UNQ_TCreditcards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TCONTRACTTYPES ADD CONSTRAINT UNQ_TCONTRACTTYPES_2 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TCONTRACT ADD CONSTRAINT UNQ_TCONTRACT_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (PAYMENTMEAN_ID, INVOICE_ID)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWORKORDERS (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT FK_TPAYROLLS_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TCONTRACT (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TCreditcards ADD CONSTRAINT FK_TCreditcards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TPROFESSIONALGROUPS (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TCONTRACTTYPES (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicletypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TMechanics ADD CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID FOREIGN KEY (INFORCECONTRACT_ID) REFERENCES TCONTRACT (ID)
INSERT INTO TCONTRACTTYPES VALUES('4e08286a-7c0b-4037-8e84-a389322fadc9',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('3d34e844-685c-4c99-b315-12ad81410ab5','mechanic-dni','noName','noSurname',1,NULL)
INSERT INTO TPROFESSIONALGROUPS VALUES('26d2b8e9-4464-4918-8a7c-863d310c01ce','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACT VALUES('40fa6d52-d19a-4742-92f2-bde17147b9ea',3000.0E0,'2022-11-30',0.0E0,'2022-11-16','TERMINATED',1,'4e08286a-7c0b-4037-8e84-a389322fadc9','3d34e844-685c-4c99-b315-12ad81410ab5','26d2b8e9-4464-4918-8a7c-863d310c01ce','3d34e844-685c-4c99-b315-12ad81410ab5')
COMMIT
DISCONNECT
/*C8*/SET SCHEMA PUBLIC
DISCONNECT
/*C9*/SET SCHEMA PUBLIC
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT FK_TPAYROLLS_CONTRACT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT UNQ_TPAYROLLS_0
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_MECHANIC_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_VEHICLE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_INVOICE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT UNQ_TWORKORDERS_0
ALTER TABLE TCreditcards DROP CONSTRAINT FK_TCreditcards_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_MECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT UNQ_TCONTRACT_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TMechanics DROP CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TPAYROLLS
DROP TABLE TClients
DROP TABLE TPROFESSIONALGROUPS
DROP TABLE TVehicletypes
DROP TABLE TWORKORDERS
DROP TABLE TCreditcards
DROP TABLE TInvoices
DROP TABLE TCONTRACTTYPES
DROP TABLE TSpareparts
DROP TABLE TCONTRACT
DROP TABLE TVouchers
DROP TABLE TSubstitutions
DROP TABLE TCashes
DROP TABLE TCharges
DROP TABLE TVehicles
DROP TABLE TMechanics
CREATE TABLE TInterventions (ID VARCHAR(36) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(36), WORKORDER_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(36) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPAYROLLS (ID VARCHAR(36) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPROFESSIONALGROUPS (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicletypes (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TWORKORDERS (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATE VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), VEHICLE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCreditcards (ID VARCHAR(36) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATE VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACTTYPES (ID VARCHAR(36) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(36) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACT (ID VARCHAR(36) NOT NULL, ANNUALWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), PROFESSIONALGROUP_ID VARCHAR(36), FIREDMECHANIC_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(36) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(36) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(36), SPAREPART_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(36) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(36) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(36), PAYMENTMEAN_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(36) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(36), VEHICLETYPE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, INFORCECONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (DATE, MECHANIC_ID, WORKORDER_ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_2 UNIQUE (DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TPROFESSIONALGROUPS ADD CONSTRAINT UNQ_TPROFESSIONALGROUPS_1 UNIQUE (NAME)
ALTER TABLE TVehicletypes ADD CONSTRAINT UNQ_TVehicletypes_1 UNIQUE (NAME)
ALTER TABLE TWORKORDERS ADD CONSTRAINT UNQ_TWORKORDERS_0 UNIQUE (DATE, VEHICLE_ID)
ALTER TABLE TCreditcards ADD CONSTRAINT UNQ_TCreditcards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TCONTRACTTYPES ADD CONSTRAINT UNQ_TCONTRACTTYPES_2 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TCONTRACT ADD CONSTRAINT UNQ_TCONTRACT_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (PAYMENTMEAN_ID, INVOICE_ID)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWORKORDERS (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT FK_TPAYROLLS_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TCONTRACT (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TCreditcards ADD CONSTRAINT FK_TCreditcards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TPROFESSIONALGROUPS (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TCONTRACTTYPES (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicletypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TMechanics ADD CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID FOREIGN KEY (INFORCECONTRACT_ID) REFERENCES TCONTRACT (ID)
INSERT INTO TCONTRACTTYPES VALUES('fd35988b-a9b9-4e19-b71f-b53d3087f0e5',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('c40ad957-3c0a-4248-b5db-a28f64ad9d32','mechanic-dni','noName','noSurname',1,NULL)
INSERT INTO TPROFESSIONALGROUPS VALUES('2fee1949-8ca4-4c77-9fa0-27afd5c8e852','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACT VALUES('5e2cf5b6-f893-4e40-b1d5-17929415932e',3000.0E0,'2022-11-17',0.0E0,'2022-11-16','IN_FORCE',1,'fd35988b-a9b9-4e19-b71f-b53d3087f0e5','c40ad957-3c0a-4248-b5db-a28f64ad9d32','2fee1949-8ca4-4c77-9fa0-27afd5c8e852',NULL)
DELETE FROM TMECHANICS WHERE ID='c40ad957-3c0a-4248-b5db-a28f64ad9d32'
INSERT INTO TMECHANICS VALUES('c40ad957-3c0a-4248-b5db-a28f64ad9d32','mechanic-dni','noName','noSurname',1,'5e2cf5b6-f893-4e40-b1d5-17929415932e')
COMMIT
DISCONNECT
/*C10*/SET SCHEMA PUBLIC
DISCONNECT
/*C11*/SET SCHEMA PUBLIC
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT FK_TPAYROLLS_CONTRACT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT UNQ_TPAYROLLS_0
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_MECHANIC_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_VEHICLE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_INVOICE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT UNQ_TWORKORDERS_0
ALTER TABLE TCreditcards DROP CONSTRAINT FK_TCreditcards_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_MECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT UNQ_TCONTRACT_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TMechanics DROP CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TPAYROLLS
DROP TABLE TClients
DROP TABLE TPROFESSIONALGROUPS
DROP TABLE TVehicletypes
DROP TABLE TWORKORDERS
DROP TABLE TCreditcards
DROP TABLE TInvoices
DROP TABLE TCONTRACTTYPES
DROP TABLE TSpareparts
DROP TABLE TCONTRACT
DROP TABLE TVouchers
DROP TABLE TSubstitutions
DROP TABLE TCashes
DROP TABLE TCharges
DROP TABLE TVehicles
DROP TABLE TMechanics
CREATE TABLE TInterventions (ID VARCHAR(36) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(36), WORKORDER_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(36) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPAYROLLS (ID VARCHAR(36) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPROFESSIONALGROUPS (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicletypes (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TWORKORDERS (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATE VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), VEHICLE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCreditcards (ID VARCHAR(36) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATE VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACTTYPES (ID VARCHAR(36) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(36) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACT (ID VARCHAR(36) NOT NULL, ANNUALWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), PROFESSIONALGROUP_ID VARCHAR(36), FIREDMECHANIC_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(36) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(36) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(36), SPAREPART_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(36) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(36) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(36), PAYMENTMEAN_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(36) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(36), VEHICLETYPE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, INFORCECONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (DATE, MECHANIC_ID, WORKORDER_ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_2 UNIQUE (DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TPROFESSIONALGROUPS ADD CONSTRAINT UNQ_TPROFESSIONALGROUPS_1 UNIQUE (NAME)
ALTER TABLE TVehicletypes ADD CONSTRAINT UNQ_TVehicletypes_1 UNIQUE (NAME)
ALTER TABLE TWORKORDERS ADD CONSTRAINT UNQ_TWORKORDERS_0 UNIQUE (DATE, VEHICLE_ID)
ALTER TABLE TCreditcards ADD CONSTRAINT UNQ_TCreditcards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TCONTRACTTYPES ADD CONSTRAINT UNQ_TCONTRACTTYPES_2 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TCONTRACT ADD CONSTRAINT UNQ_TCONTRACT_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (PAYMENTMEAN_ID, INVOICE_ID)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWORKORDERS (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT FK_TPAYROLLS_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TCONTRACT (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TCreditcards ADD CONSTRAINT FK_TCreditcards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TPROFESSIONALGROUPS (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TCONTRACTTYPES (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicletypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TMechanics ADD CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID FOREIGN KEY (INFORCECONTRACT_ID) REFERENCES TCONTRACT (ID)
INSERT INTO TCONTRACTTYPES VALUES('c78035c5-e58b-462a-8a5f-414575da0e51',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('c79e09c6-e689-4979-a5b7-34d7de01440d','mechanic-dni','noName','noSurname',1,NULL)
INSERT INTO TPROFESSIONALGROUPS VALUES('ecdd0f8f-0bc4-4dd6-abd0-c0fd73bec548','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACT VALUES('cdf57523-a251-4261-bcb6-d1e21f337c85',3000.0E0,'2022-11-17',0.0E0,'2022-11-16','IN_FORCE',1,'c78035c5-e58b-462a-8a5f-414575da0e51','c79e09c6-e689-4979-a5b7-34d7de01440d','ecdd0f8f-0bc4-4dd6-abd0-c0fd73bec548',NULL)
DELETE FROM TMECHANICS WHERE ID='c79e09c6-e689-4979-a5b7-34d7de01440d'
INSERT INTO TMECHANICS VALUES('c79e09c6-e689-4979-a5b7-34d7de01440d','mechanic-dni','noName','noSurname',1,'cdf57523-a251-4261-bcb6-d1e21f337c85')
COMMIT
DISCONNECT
/*C12*/SET SCHEMA PUBLIC
DISCONNECT
/*C13*/SET SCHEMA PUBLIC
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT FK_TPAYROLLS_CONTRACT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT UNQ_TPAYROLLS_0
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_MECHANIC_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_VEHICLE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_INVOICE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT UNQ_TWORKORDERS_0
ALTER TABLE TCreditcards DROP CONSTRAINT FK_TCreditcards_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_MECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT UNQ_TCONTRACT_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TMechanics DROP CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TPAYROLLS
DROP TABLE TClients
DROP TABLE TPROFESSIONALGROUPS
DROP TABLE TVehicletypes
DROP TABLE TWORKORDERS
DROP TABLE TCreditcards
DROP TABLE TInvoices
DROP TABLE TCONTRACTTYPES
DROP TABLE TSpareparts
DROP TABLE TCONTRACT
DROP TABLE TVouchers
DROP TABLE TSubstitutions
DROP TABLE TCashes
DROP TABLE TCharges
DROP TABLE TVehicles
DROP TABLE TMechanics
CREATE TABLE TInterventions (ID VARCHAR(36) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(36), WORKORDER_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(36) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPAYROLLS (ID VARCHAR(36) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPROFESSIONALGROUPS (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicletypes (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TWORKORDERS (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATE VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), VEHICLE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCreditcards (ID VARCHAR(36) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATE VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACTTYPES (ID VARCHAR(36) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(36) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACT (ID VARCHAR(36) NOT NULL, ANNUALWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), PROFESSIONALGROUP_ID VARCHAR(36), FIREDMECHANIC_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(36) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(36) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(36), SPAREPART_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(36) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(36) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(36), PAYMENTMEAN_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(36) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(36), VEHICLETYPE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, INFORCECONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (DATE, MECHANIC_ID, WORKORDER_ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_2 UNIQUE (DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TPROFESSIONALGROUPS ADD CONSTRAINT UNQ_TPROFESSIONALGROUPS_1 UNIQUE (NAME)
ALTER TABLE TVehicletypes ADD CONSTRAINT UNQ_TVehicletypes_1 UNIQUE (NAME)
ALTER TABLE TWORKORDERS ADD CONSTRAINT UNQ_TWORKORDERS_0 UNIQUE (DATE, VEHICLE_ID)
ALTER TABLE TCreditcards ADD CONSTRAINT UNQ_TCreditcards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TCONTRACTTYPES ADD CONSTRAINT UNQ_TCONTRACTTYPES_2 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TCONTRACT ADD CONSTRAINT UNQ_TCONTRACT_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (PAYMENTMEAN_ID, INVOICE_ID)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWORKORDERS (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT FK_TPAYROLLS_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TCONTRACT (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TCreditcards ADD CONSTRAINT FK_TCreditcards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TPROFESSIONALGROUPS (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TCONTRACTTYPES (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicletypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TMechanics ADD CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID FOREIGN KEY (INFORCECONTRACT_ID) REFERENCES TCONTRACT (ID)
INSERT INTO TCONTRACTTYPES VALUES('f064c295-949e-4aa5-97bd-dd674eec35bb',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('e9228ca8-335c-4c19-809c-5632b8214dd3','mechanic-dni','noName','noSurname',1,NULL)
INSERT INTO TPROFESSIONALGROUPS VALUES('4b6a296f-f483-4330-a387-d8c9bc679048','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACT VALUES('23bf2d6e-f22e-46f7-93ee-d71149dd5a63',3000.0E0,'2022-11-17',0.0E0,'2022-11-16','IN_FORCE',1,'f064c295-949e-4aa5-97bd-dd674eec35bb','e9228ca8-335c-4c19-809c-5632b8214dd3','4b6a296f-f483-4330-a387-d8c9bc679048',NULL)
DELETE FROM TMECHANICS WHERE ID='e9228ca8-335c-4c19-809c-5632b8214dd3'
INSERT INTO TMECHANICS VALUES('e9228ca8-335c-4c19-809c-5632b8214dd3','mechanic-dni','noName','noSurname',1,'23bf2d6e-f22e-46f7-93ee-d71149dd5a63')
INSERT INTO TPAYROLLS VALUES('99ff5fa3-9c8e-433c-a3e9-35c4603556e5',0.0E0,'2022-11-16',40.714285714285715E0,214.28571428571428E0,12.5E0,0.0E0,0.0E0,1,'23bf2d6e-f22e-46f7-93ee-d71149dd5a63')
COMMIT
DISCONNECT
/*C14*/SET SCHEMA PUBLIC
DISCONNECT
/*C15*/SET SCHEMA PUBLIC
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT FK_TPAYROLLS_CONTRACT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT UNQ_TPAYROLLS_0
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_MECHANIC_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_VEHICLE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_INVOICE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT UNQ_TWORKORDERS_0
ALTER TABLE TCreditcards DROP CONSTRAINT FK_TCreditcards_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_MECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT UNQ_TCONTRACT_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TMechanics DROP CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TPAYROLLS
DROP TABLE TClients
DROP TABLE TPROFESSIONALGROUPS
DROP TABLE TVehicletypes
DROP TABLE TWORKORDERS
DROP TABLE TCreditcards
DROP TABLE TInvoices
DROP TABLE TCONTRACTTYPES
DROP TABLE TSpareparts
DROP TABLE TCONTRACT
DROP TABLE TVouchers
DROP TABLE TSubstitutions
DROP TABLE TCashes
DROP TABLE TCharges
DROP TABLE TVehicles
DROP TABLE TMechanics
CREATE TABLE TInterventions (ID VARCHAR(36) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(36), WORKORDER_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(36) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPAYROLLS (ID VARCHAR(36) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPROFESSIONALGROUPS (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicletypes (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TWORKORDERS (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATE VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), VEHICLE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCreditcards (ID VARCHAR(36) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATE VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACTTYPES (ID VARCHAR(36) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(36) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACT (ID VARCHAR(36) NOT NULL, ANNUALWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), PROFESSIONALGROUP_ID VARCHAR(36), FIREDMECHANIC_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(36) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(36) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(36), SPAREPART_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(36) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(36) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(36), PAYMENTMEAN_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(36) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(36), VEHICLETYPE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, INFORCECONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (DATE, MECHANIC_ID, WORKORDER_ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_2 UNIQUE (DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TPROFESSIONALGROUPS ADD CONSTRAINT UNQ_TPROFESSIONALGROUPS_1 UNIQUE (NAME)
ALTER TABLE TVehicletypes ADD CONSTRAINT UNQ_TVehicletypes_1 UNIQUE (NAME)
ALTER TABLE TWORKORDERS ADD CONSTRAINT UNQ_TWORKORDERS_0 UNIQUE (DATE, VEHICLE_ID)
ALTER TABLE TCreditcards ADD CONSTRAINT UNQ_TCreditcards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TCONTRACTTYPES ADD CONSTRAINT UNQ_TCONTRACTTYPES_2 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TCONTRACT ADD CONSTRAINT UNQ_TCONTRACT_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (PAYMENTMEAN_ID, INVOICE_ID)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWORKORDERS (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT FK_TPAYROLLS_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TCONTRACT (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TCreditcards ADD CONSTRAINT FK_TCreditcards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TPROFESSIONALGROUPS (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TCONTRACTTYPES (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicletypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TMechanics ADD CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID FOREIGN KEY (INFORCECONTRACT_ID) REFERENCES TCONTRACT (ID)
INSERT INTO TCONTRACTTYPES VALUES('b694cfa3-5e2f-4512-b787-3e6d0cf509a5',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('c8e2af58-599b-4b3d-a2a5-ad5e962795f0','mechanic-dni','noName','noSurname',1,NULL)
INSERT INTO TPROFESSIONALGROUPS VALUES('4f39a531-798b-4c13-8751-37470da2496b','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACT VALUES('06e77e80-fb72-41bd-ad62-59282857fa04',3000.0E0,'2022-11-17',0.0E0,'2022-11-16','IN_FORCE',1,'b694cfa3-5e2f-4512-b787-3e6d0cf509a5','c8e2af58-599b-4b3d-a2a5-ad5e962795f0','4f39a531-798b-4c13-8751-37470da2496b',NULL)
DELETE FROM TMECHANICS WHERE ID='c8e2af58-599b-4b3d-a2a5-ad5e962795f0'
INSERT INTO TMECHANICS VALUES('c8e2af58-599b-4b3d-a2a5-ad5e962795f0','mechanic-dni','noName','noSurname',1,'06e77e80-fb72-41bd-ad62-59282857fa04')
INSERT INTO TPAYROLLS VALUES('458c9009-367e-4074-ac2e-0ba1be51c594',0.0E0,'2022-11-16',40.714285714285715E0,214.28571428571428E0,12.5E0,0.0E0,0.0E0,1,'06e77e80-fb72-41bd-ad62-59282857fa04')
COMMIT
DISCONNECT
/*C16*/SET SCHEMA PUBLIC
DISCONNECT
/*C17*/SET SCHEMA PUBLIC
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT FK_TPAYROLLS_CONTRACT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT UNQ_TPAYROLLS_0
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_MECHANIC_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_VEHICLE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_INVOICE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT UNQ_TWORKORDERS_0
ALTER TABLE TCreditcards DROP CONSTRAINT FK_TCreditcards_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_MECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT UNQ_TCONTRACT_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TMechanics DROP CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TPAYROLLS
DROP TABLE TClients
DROP TABLE TPROFESSIONALGROUPS
DROP TABLE TVehicletypes
DROP TABLE TWORKORDERS
DROP TABLE TCreditcards
DROP TABLE TInvoices
DROP TABLE TCONTRACTTYPES
DROP TABLE TSpareparts
DROP TABLE TCONTRACT
DROP TABLE TVouchers
DROP TABLE TSubstitutions
DROP TABLE TCashes
DROP TABLE TCharges
DROP TABLE TVehicles
DROP TABLE TMechanics
CREATE TABLE TInterventions (ID VARCHAR(36) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(36), WORKORDER_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(36) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPAYROLLS (ID VARCHAR(36) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPROFESSIONALGROUPS (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicletypes (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TWORKORDERS (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATE VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), VEHICLE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCreditcards (ID VARCHAR(36) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATE VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACTTYPES (ID VARCHAR(36) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(36) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACT (ID VARCHAR(36) NOT NULL, ANNUALWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), PROFESSIONALGROUP_ID VARCHAR(36), FIREDMECHANIC_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(36) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(36) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(36), SPAREPART_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(36) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(36) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(36), PAYMENTMEAN_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(36) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(36), VEHICLETYPE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, INFORCECONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (DATE, MECHANIC_ID, WORKORDER_ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_2 UNIQUE (DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TPROFESSIONALGROUPS ADD CONSTRAINT UNQ_TPROFESSIONALGROUPS_1 UNIQUE (NAME)
ALTER TABLE TVehicletypes ADD CONSTRAINT UNQ_TVehicletypes_1 UNIQUE (NAME)
ALTER TABLE TWORKORDERS ADD CONSTRAINT UNQ_TWORKORDERS_0 UNIQUE (DATE, VEHICLE_ID)
ALTER TABLE TCreditcards ADD CONSTRAINT UNQ_TCreditcards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TCONTRACTTYPES ADD CONSTRAINT UNQ_TCONTRACTTYPES_2 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TCONTRACT ADD CONSTRAINT UNQ_TCONTRACT_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (PAYMENTMEAN_ID, INVOICE_ID)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWORKORDERS (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT FK_TPAYROLLS_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TCONTRACT (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TCreditcards ADD CONSTRAINT FK_TCreditcards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TPROFESSIONALGROUPS (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TCONTRACTTYPES (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicletypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TMechanics ADD CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID FOREIGN KEY (INFORCECONTRACT_ID) REFERENCES TCONTRACT (ID)
INSERT INTO TCONTRACTTYPES VALUES('4e4f88ae-b230-417d-9dd7-ad6c42230f66',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('c0d0188e-6c27-4cd2-aef8-7bcd83839e52','mechanic-dni','noName','noSurname',1,NULL)
INSERT INTO TPROFESSIONALGROUPS VALUES('af01d90b-6222-430c-a21c-c056d125429f','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACT VALUES('70352af5-bc3e-4853-aeff-450285033494',3000.0E0,'2022-11-17',0.0E0,'2022-11-16','IN_FORCE',1,'4e4f88ae-b230-417d-9dd7-ad6c42230f66','c0d0188e-6c27-4cd2-aef8-7bcd83839e52','af01d90b-6222-430c-a21c-c056d125429f',NULL)
DELETE FROM TMECHANICS WHERE ID='c0d0188e-6c27-4cd2-aef8-7bcd83839e52'
INSERT INTO TMECHANICS VALUES('c0d0188e-6c27-4cd2-aef8-7bcd83839e52','mechanic-dni','noName','noSurname',1,'70352af5-bc3e-4853-aeff-450285033494')
COMMIT
DISCONNECT
/*C18*/SET SCHEMA PUBLIC
DISCONNECT
/*C19*/SET SCHEMA PUBLIC
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT FK_TPAYROLLS_CONTRACT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT UNQ_TPAYROLLS_0
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_MECHANIC_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_VEHICLE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_INVOICE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT UNQ_TWORKORDERS_0
ALTER TABLE TCreditcards DROP CONSTRAINT FK_TCreditcards_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_MECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT UNQ_TCONTRACT_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TMechanics DROP CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TPAYROLLS
DROP TABLE TClients
DROP TABLE TPROFESSIONALGROUPS
DROP TABLE TVehicletypes
DROP TABLE TWORKORDERS
DROP TABLE TCreditcards
DROP TABLE TInvoices
DROP TABLE TCONTRACTTYPES
DROP TABLE TSpareparts
DROP TABLE TCONTRACT
DROP TABLE TVouchers
DROP TABLE TSubstitutions
DROP TABLE TCashes
DROP TABLE TCharges
DROP TABLE TVehicles
DROP TABLE TMechanics
CREATE TABLE TInterventions (ID VARCHAR(36) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(36), WORKORDER_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(36) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPAYROLLS (ID VARCHAR(36) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPROFESSIONALGROUPS (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicletypes (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TWORKORDERS (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATE VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), VEHICLE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCreditcards (ID VARCHAR(36) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATE VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACTTYPES (ID VARCHAR(36) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(36) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACT (ID VARCHAR(36) NOT NULL, ANNUALWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), PROFESSIONALGROUP_ID VARCHAR(36), FIREDMECHANIC_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(36) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(36) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(36), SPAREPART_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(36) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(36) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(36), PAYMENTMEAN_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(36) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(36), VEHICLETYPE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, INFORCECONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (DATE, MECHANIC_ID, WORKORDER_ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_2 UNIQUE (DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TPROFESSIONALGROUPS ADD CONSTRAINT UNQ_TPROFESSIONALGROUPS_1 UNIQUE (NAME)
ALTER TABLE TVehicletypes ADD CONSTRAINT UNQ_TVehicletypes_1 UNIQUE (NAME)
ALTER TABLE TWORKORDERS ADD CONSTRAINT UNQ_TWORKORDERS_0 UNIQUE (DATE, VEHICLE_ID)
ALTER TABLE TCreditcards ADD CONSTRAINT UNQ_TCreditcards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TCONTRACTTYPES ADD CONSTRAINT UNQ_TCONTRACTTYPES_2 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TCONTRACT ADD CONSTRAINT UNQ_TCONTRACT_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (PAYMENTMEAN_ID, INVOICE_ID)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWORKORDERS (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT FK_TPAYROLLS_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TCONTRACT (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TCreditcards ADD CONSTRAINT FK_TCreditcards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TPROFESSIONALGROUPS (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TCONTRACTTYPES (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicletypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TMechanics ADD CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID FOREIGN KEY (INFORCECONTRACT_ID) REFERENCES TCONTRACT (ID)
INSERT INTO TCONTRACTTYPES VALUES('e582219b-fe4e-43d4-a57f-c378a5dc08bf',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('cb61b54b-5610-4785-a1fb-de15e71755a1','mechanic-dni','noName','noSurname',1,NULL)
INSERT INTO TPROFESSIONALGROUPS VALUES('708b6a5f-6138-4109-b19d-20746c5cc31b','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACT VALUES('5de49efa-cd06-4b0d-b06a-aa80a51ef2d1',3000.0E0,'2022-11-17',0.0E0,'2022-11-16','IN_FORCE',1,'e582219b-fe4e-43d4-a57f-c378a5dc08bf','cb61b54b-5610-4785-a1fb-de15e71755a1','708b6a5f-6138-4109-b19d-20746c5cc31b',NULL)
DELETE FROM TMECHANICS WHERE ID='cb61b54b-5610-4785-a1fb-de15e71755a1'
INSERT INTO TMECHANICS VALUES('cb61b54b-5610-4785-a1fb-de15e71755a1','mechanic-dni','noName','noSurname',1,'5de49efa-cd06-4b0d-b06a-aa80a51ef2d1')
COMMIT
DISCONNECT
/*C20*/SET SCHEMA PUBLIC
DISCONNECT
/*C21*/SET SCHEMA PUBLIC
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT FK_TPAYROLLS_CONTRACT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT UNQ_TPAYROLLS_0
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_MECHANIC_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_VEHICLE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_INVOICE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT UNQ_TWORKORDERS_0
ALTER TABLE TCreditcards DROP CONSTRAINT FK_TCreditcards_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_MECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT UNQ_TCONTRACT_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TMechanics DROP CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TPAYROLLS
DROP TABLE TClients
DROP TABLE TPROFESSIONALGROUPS
DROP TABLE TVehicletypes
DROP TABLE TWORKORDERS
DROP TABLE TCreditcards
DROP TABLE TInvoices
DROP TABLE TCONTRACTTYPES
DROP TABLE TSpareparts
DROP TABLE TCONTRACT
DROP TABLE TVouchers
DROP TABLE TSubstitutions
DROP TABLE TCashes
DROP TABLE TCharges
DROP TABLE TVehicles
DROP TABLE TMechanics
CREATE TABLE TInterventions (ID VARCHAR(36) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(36), WORKORDER_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(36) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPAYROLLS (ID VARCHAR(36) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPROFESSIONALGROUPS (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicletypes (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TWORKORDERS (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATE VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), VEHICLE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCreditcards (ID VARCHAR(36) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATE VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACTTYPES (ID VARCHAR(36) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(36) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACT (ID VARCHAR(36) NOT NULL, ANNUALWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), PROFESSIONALGROUP_ID VARCHAR(36), FIREDMECHANIC_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(36) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(36) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(36), SPAREPART_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(36) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(36) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(36), PAYMENTMEAN_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(36) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(36), VEHICLETYPE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, INFORCECONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (DATE, MECHANIC_ID, WORKORDER_ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_2 UNIQUE (DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TPROFESSIONALGROUPS ADD CONSTRAINT UNQ_TPROFESSIONALGROUPS_1 UNIQUE (NAME)
ALTER TABLE TVehicletypes ADD CONSTRAINT UNQ_TVehicletypes_1 UNIQUE (NAME)
ALTER TABLE TWORKORDERS ADD CONSTRAINT UNQ_TWORKORDERS_0 UNIQUE (DATE, VEHICLE_ID)
ALTER TABLE TCreditcards ADD CONSTRAINT UNQ_TCreditcards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TCONTRACTTYPES ADD CONSTRAINT UNQ_TCONTRACTTYPES_2 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TCONTRACT ADD CONSTRAINT UNQ_TCONTRACT_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (PAYMENTMEAN_ID, INVOICE_ID)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWORKORDERS (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT FK_TPAYROLLS_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TCONTRACT (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TCreditcards ADD CONSTRAINT FK_TCreditcards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TPROFESSIONALGROUPS (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TCONTRACTTYPES (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicletypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TMechanics ADD CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID FOREIGN KEY (INFORCECONTRACT_ID) REFERENCES TCONTRACT (ID)
INSERT INTO TCONTRACTTYPES VALUES('d60f1cf9-ac10-4613-9ff1-53ec51b7d0ad',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('2d378c82-7592-4d09-8e79-697ebfacec0f','mechanic-dni','noName','noSurname',1,NULL)
INSERT INTO TPROFESSIONALGROUPS VALUES('02e0695f-d7e6-4009-9f47-d8799971f4b0','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACT VALUES('2bf55812-c63d-4869-bc4b-0917066c8f72',3000.0E0,'2022-11-17',0.0E0,'2022-11-16','IN_FORCE',1,'d60f1cf9-ac10-4613-9ff1-53ec51b7d0ad','2d378c82-7592-4d09-8e79-697ebfacec0f','02e0695f-d7e6-4009-9f47-d8799971f4b0',NULL)
DELETE FROM TMECHANICS WHERE ID='2d378c82-7592-4d09-8e79-697ebfacec0f'
INSERT INTO TMECHANICS VALUES('2d378c82-7592-4d09-8e79-697ebfacec0f','mechanic-dni','noName','noSurname',1,'2bf55812-c63d-4869-bc4b-0917066c8f72')
COMMIT
DISCONNECT
/*C22*/SET SCHEMA PUBLIC
DISCONNECT
/*C23*/SET SCHEMA PUBLIC
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT FK_TPAYROLLS_CONTRACT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT UNQ_TPAYROLLS_0
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_MECHANIC_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_VEHICLE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_INVOICE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT UNQ_TWORKORDERS_0
ALTER TABLE TCreditcards DROP CONSTRAINT FK_TCreditcards_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_MECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT UNQ_TCONTRACT_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TMechanics DROP CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TPAYROLLS
DROP TABLE TClients
DROP TABLE TPROFESSIONALGROUPS
DROP TABLE TVehicletypes
DROP TABLE TWORKORDERS
DROP TABLE TCreditcards
DROP TABLE TInvoices
DROP TABLE TCONTRACTTYPES
DROP TABLE TSpareparts
DROP TABLE TCONTRACT
DROP TABLE TVouchers
DROP TABLE TSubstitutions
DROP TABLE TCashes
DROP TABLE TCharges
DROP TABLE TVehicles
DROP TABLE TMechanics
CREATE TABLE TInterventions (ID VARCHAR(36) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(36), WORKORDER_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(36) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPAYROLLS (ID VARCHAR(36) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPROFESSIONALGROUPS (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicletypes (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TWORKORDERS (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATE VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), VEHICLE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCreditcards (ID VARCHAR(36) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATE VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACTTYPES (ID VARCHAR(36) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(36) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACT (ID VARCHAR(36) NOT NULL, ANNUALWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), PROFESSIONALGROUP_ID VARCHAR(36), FIREDMECHANIC_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(36) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(36) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(36), SPAREPART_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(36) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(36) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(36), PAYMENTMEAN_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(36) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(36), VEHICLETYPE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, INFORCECONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (DATE, MECHANIC_ID, WORKORDER_ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_2 UNIQUE (DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TPROFESSIONALGROUPS ADD CONSTRAINT UNQ_TPROFESSIONALGROUPS_1 UNIQUE (NAME)
ALTER TABLE TVehicletypes ADD CONSTRAINT UNQ_TVehicletypes_1 UNIQUE (NAME)
ALTER TABLE TWORKORDERS ADD CONSTRAINT UNQ_TWORKORDERS_0 UNIQUE (DATE, VEHICLE_ID)
ALTER TABLE TCreditcards ADD CONSTRAINT UNQ_TCreditcards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TCONTRACTTYPES ADD CONSTRAINT UNQ_TCONTRACTTYPES_2 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TCONTRACT ADD CONSTRAINT UNQ_TCONTRACT_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (PAYMENTMEAN_ID, INVOICE_ID)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWORKORDERS (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT FK_TPAYROLLS_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TCONTRACT (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TCreditcards ADD CONSTRAINT FK_TCreditcards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TPROFESSIONALGROUPS (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TCONTRACTTYPES (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicletypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TMechanics ADD CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID FOREIGN KEY (INFORCECONTRACT_ID) REFERENCES TCONTRACT (ID)
INSERT INTO TCONTRACTTYPES VALUES('5f74aea3-c57b-422a-aa94-39192ced0b5a',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('710bc430-93bb-4a42-a5ac-6870a6645525','mechanic-dni','noName','noSurname',1,NULL)
INSERT INTO TPROFESSIONALGROUPS VALUES('66467291-56cc-45a3-bbc6-c335820e9882','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACT VALUES('d633371b-1586-4f55-96a0-ab4dcab4d183',3000.0E0,'2022-11-17',0.0E0,'2022-11-16','IN_FORCE',1,'5f74aea3-c57b-422a-aa94-39192ced0b5a','710bc430-93bb-4a42-a5ac-6870a6645525','66467291-56cc-45a3-bbc6-c335820e9882',NULL)
DELETE FROM TMECHANICS WHERE ID='710bc430-93bb-4a42-a5ac-6870a6645525'
INSERT INTO TMECHANICS VALUES('710bc430-93bb-4a42-a5ac-6870a6645525','mechanic-dni','noName','noSurname',1,'d633371b-1586-4f55-96a0-ab4dcab4d183')
COMMIT
DISCONNECT
/*C24*/SET SCHEMA PUBLIC
DISCONNECT
/*C25*/SET SCHEMA PUBLIC
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT FK_TPAYROLLS_CONTRACT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT UNQ_TPAYROLLS_0
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_MECHANIC_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_VEHICLE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_INVOICE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT UNQ_TWORKORDERS_0
ALTER TABLE TCreditcards DROP CONSTRAINT FK_TCreditcards_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_MECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT UNQ_TCONTRACT_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TMechanics DROP CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TPAYROLLS
DROP TABLE TClients
DROP TABLE TPROFESSIONALGROUPS
DROP TABLE TVehicletypes
DROP TABLE TWORKORDERS
DROP TABLE TCreditcards
DROP TABLE TInvoices
DROP TABLE TCONTRACTTYPES
DROP TABLE TSpareparts
DROP TABLE TCONTRACT
DROP TABLE TVouchers
DROP TABLE TSubstitutions
DROP TABLE TCashes
DROP TABLE TCharges
DROP TABLE TVehicles
DROP TABLE TMechanics
CREATE TABLE TInterventions (ID VARCHAR(36) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(36), WORKORDER_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(36) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPAYROLLS (ID VARCHAR(36) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPROFESSIONALGROUPS (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicletypes (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TWORKORDERS (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATE VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), VEHICLE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCreditcards (ID VARCHAR(36) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATE VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACTTYPES (ID VARCHAR(36) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(36) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACT (ID VARCHAR(36) NOT NULL, ANNUALWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), PROFESSIONALGROUP_ID VARCHAR(36), FIREDMECHANIC_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(36) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(36) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(36), SPAREPART_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(36) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(36) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(36), PAYMENTMEAN_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(36) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(36), VEHICLETYPE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, INFORCECONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (DATE, MECHANIC_ID, WORKORDER_ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_2 UNIQUE (DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TPROFESSIONALGROUPS ADD CONSTRAINT UNQ_TPROFESSIONALGROUPS_1 UNIQUE (NAME)
ALTER TABLE TVehicletypes ADD CONSTRAINT UNQ_TVehicletypes_1 UNIQUE (NAME)
ALTER TABLE TWORKORDERS ADD CONSTRAINT UNQ_TWORKORDERS_0 UNIQUE (DATE, VEHICLE_ID)
ALTER TABLE TCreditcards ADD CONSTRAINT UNQ_TCreditcards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TCONTRACTTYPES ADD CONSTRAINT UNQ_TCONTRACTTYPES_2 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TCONTRACT ADD CONSTRAINT UNQ_TCONTRACT_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (PAYMENTMEAN_ID, INVOICE_ID)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWORKORDERS (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT FK_TPAYROLLS_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TCONTRACT (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TCreditcards ADD CONSTRAINT FK_TCreditcards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TPROFESSIONALGROUPS (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TCONTRACTTYPES (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicletypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TMechanics ADD CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID FOREIGN KEY (INFORCECONTRACT_ID) REFERENCES TCONTRACT (ID)
INSERT INTO TCONTRACTTYPES VALUES('73ca0a60-e252-43bd-82fa-e495b1a1b744',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('13ba26ff-ee62-40db-901f-71b10b15d8d9','mechanic-dni','noName','noSurname',1,NULL)
INSERT INTO TPROFESSIONALGROUPS VALUES('da1c31ee-58e4-427c-b531-deba6ed09ac5','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACT VALUES('6bc9016d-38aa-4966-a59a-0f80233fdb02',3000.0E0,'2022-11-17',0.0E0,'2022-11-16','IN_FORCE',1,'73ca0a60-e252-43bd-82fa-e495b1a1b744','13ba26ff-ee62-40db-901f-71b10b15d8d9','da1c31ee-58e4-427c-b531-deba6ed09ac5',NULL)
DELETE FROM TMECHANICS WHERE ID='13ba26ff-ee62-40db-901f-71b10b15d8d9'
INSERT INTO TMECHANICS VALUES('13ba26ff-ee62-40db-901f-71b10b15d8d9','mechanic-dni','noName','noSurname',1,'6bc9016d-38aa-4966-a59a-0f80233fdb02')
COMMIT
DISCONNECT
/*C26*/SET SCHEMA PUBLIC
DISCONNECT
/*C27*/SET SCHEMA PUBLIC
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT FK_TPAYROLLS_CONTRACT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT UNQ_TPAYROLLS_0
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_MECHANIC_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_VEHICLE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_INVOICE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT UNQ_TWORKORDERS_0
ALTER TABLE TCreditcards DROP CONSTRAINT FK_TCreditcards_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_MECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT UNQ_TCONTRACT_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TMechanics DROP CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TPAYROLLS
DROP TABLE TClients
DROP TABLE TPROFESSIONALGROUPS
DROP TABLE TVehicletypes
DROP TABLE TWORKORDERS
DROP TABLE TCreditcards
DROP TABLE TInvoices
DROP TABLE TCONTRACTTYPES
DROP TABLE TSpareparts
DROP TABLE TCONTRACT
DROP TABLE TVouchers
DROP TABLE TSubstitutions
DROP TABLE TCashes
DROP TABLE TCharges
DROP TABLE TVehicles
DROP TABLE TMechanics
CREATE TABLE TInterventions (ID VARCHAR(36) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(36), WORKORDER_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(36) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPAYROLLS (ID VARCHAR(36) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPROFESSIONALGROUPS (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicletypes (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TWORKORDERS (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATE VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), VEHICLE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCreditcards (ID VARCHAR(36) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATE VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACTTYPES (ID VARCHAR(36) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(36) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACT (ID VARCHAR(36) NOT NULL, ANNUALWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), PROFESSIONALGROUP_ID VARCHAR(36), FIREDMECHANIC_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(36) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(36) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(36), SPAREPART_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(36) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(36) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(36), PAYMENTMEAN_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(36) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(36), VEHICLETYPE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, INFORCECONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (DATE, MECHANIC_ID, WORKORDER_ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_2 UNIQUE (DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TPROFESSIONALGROUPS ADD CONSTRAINT UNQ_TPROFESSIONALGROUPS_1 UNIQUE (NAME)
ALTER TABLE TVehicletypes ADD CONSTRAINT UNQ_TVehicletypes_1 UNIQUE (NAME)
ALTER TABLE TWORKORDERS ADD CONSTRAINT UNQ_TWORKORDERS_0 UNIQUE (DATE, VEHICLE_ID)
ALTER TABLE TCreditcards ADD CONSTRAINT UNQ_TCreditcards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TCONTRACTTYPES ADD CONSTRAINT UNQ_TCONTRACTTYPES_2 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TCONTRACT ADD CONSTRAINT UNQ_TCONTRACT_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (PAYMENTMEAN_ID, INVOICE_ID)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWORKORDERS (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT FK_TPAYROLLS_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TCONTRACT (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TCreditcards ADD CONSTRAINT FK_TCreditcards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TPROFESSIONALGROUPS (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TCONTRACTTYPES (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicletypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TMechanics ADD CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID FOREIGN KEY (INFORCECONTRACT_ID) REFERENCES TCONTRACT (ID)
INSERT INTO TCONTRACTTYPES VALUES('590e4ebc-b80e-47b4-b5bd-21eeaa59aebf',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('6f9ab73b-9fa2-446d-8986-6cd32c562800','mechanic-dni','noName','noSurname',1,NULL)
INSERT INTO TPROFESSIONALGROUPS VALUES('d9fb90c6-9c2a-445e-9b4b-f124d5c8886f','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACT VALUES('7abe4da4-630e-48d7-b61a-78dee3b3d7be',3000.0E0,'2022-11-17',0.0E0,'2022-11-16','IN_FORCE',1,'590e4ebc-b80e-47b4-b5bd-21eeaa59aebf','6f9ab73b-9fa2-446d-8986-6cd32c562800','d9fb90c6-9c2a-445e-9b4b-f124d5c8886f',NULL)
DELETE FROM TMECHANICS WHERE ID='6f9ab73b-9fa2-446d-8986-6cd32c562800'
INSERT INTO TMECHANICS VALUES('6f9ab73b-9fa2-446d-8986-6cd32c562800','mechanic-dni','noName','noSurname',1,'7abe4da4-630e-48d7-b61a-78dee3b3d7be')
COMMIT
DISCONNECT
/*C28*/SET SCHEMA PUBLIC
DISCONNECT
/*C29*/SET SCHEMA PUBLIC
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT FK_TPAYROLLS_CONTRACT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT UNQ_TPAYROLLS_0
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_MECHANIC_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_VEHICLE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_INVOICE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT UNQ_TWORKORDERS_0
ALTER TABLE TCreditcards DROP CONSTRAINT FK_TCreditcards_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_MECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT UNQ_TCONTRACT_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TMechanics DROP CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TPAYROLLS
DROP TABLE TClients
DROP TABLE TPROFESSIONALGROUPS
DROP TABLE TVehicletypes
DROP TABLE TWORKORDERS
DROP TABLE TCreditcards
DROP TABLE TInvoices
DROP TABLE TCONTRACTTYPES
DROP TABLE TSpareparts
DROP TABLE TCONTRACT
DROP TABLE TVouchers
DROP TABLE TSubstitutions
DROP TABLE TCashes
DROP TABLE TCharges
DROP TABLE TVehicles
DROP TABLE TMechanics
CREATE TABLE TInterventions (ID VARCHAR(36) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(36), WORKORDER_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(36) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPAYROLLS (ID VARCHAR(36) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPROFESSIONALGROUPS (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicletypes (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TWORKORDERS (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATE VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), VEHICLE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCreditcards (ID VARCHAR(36) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATE VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACTTYPES (ID VARCHAR(36) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(36) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACT (ID VARCHAR(36) NOT NULL, ANNUALWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), PROFESSIONALGROUP_ID VARCHAR(36), FIREDMECHANIC_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(36) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(36) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(36), SPAREPART_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(36) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(36) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(36), PAYMENTMEAN_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(36) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(36), VEHICLETYPE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, INFORCECONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (DATE, MECHANIC_ID, WORKORDER_ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_2 UNIQUE (DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TPROFESSIONALGROUPS ADD CONSTRAINT UNQ_TPROFESSIONALGROUPS_1 UNIQUE (NAME)
ALTER TABLE TVehicletypes ADD CONSTRAINT UNQ_TVehicletypes_1 UNIQUE (NAME)
ALTER TABLE TWORKORDERS ADD CONSTRAINT UNQ_TWORKORDERS_0 UNIQUE (DATE, VEHICLE_ID)
ALTER TABLE TCreditcards ADD CONSTRAINT UNQ_TCreditcards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TCONTRACTTYPES ADD CONSTRAINT UNQ_TCONTRACTTYPES_2 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TCONTRACT ADD CONSTRAINT UNQ_TCONTRACT_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (PAYMENTMEAN_ID, INVOICE_ID)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWORKORDERS (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT FK_TPAYROLLS_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TCONTRACT (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TCreditcards ADD CONSTRAINT FK_TCreditcards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TPROFESSIONALGROUPS (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TCONTRACTTYPES (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicletypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TMechanics ADD CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID FOREIGN KEY (INFORCECONTRACT_ID) REFERENCES TCONTRACT (ID)
INSERT INTO TCONTRACTTYPES VALUES('b6df0ec7-6184-49f1-97ca-18dcdbe62415',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('e26245c7-ba13-4ad2-a641-65de9ba15783','mechanic-dni','noName','noSurname',1,NULL)
INSERT INTO TPROFESSIONALGROUPS VALUES('5b1e88b4-1477-49e4-ae12-4717848aa6f1','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACT VALUES('eb36b636-cf0d-452f-abfc-de581bd26626',3000.0E0,'2022-11-17',0.0E0,'2022-11-16','IN_FORCE',1,'b6df0ec7-6184-49f1-97ca-18dcdbe62415','e26245c7-ba13-4ad2-a641-65de9ba15783','5b1e88b4-1477-49e4-ae12-4717848aa6f1',NULL)
DELETE FROM TMECHANICS WHERE ID='e26245c7-ba13-4ad2-a641-65de9ba15783'
INSERT INTO TMECHANICS VALUES('e26245c7-ba13-4ad2-a641-65de9ba15783','mechanic-dni','noName','noSurname',1,'eb36b636-cf0d-452f-abfc-de581bd26626')
COMMIT
DISCONNECT
/*C30*/SET SCHEMA PUBLIC
DISCONNECT
/*C31*/SET SCHEMA PUBLIC
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT FK_TPAYROLLS_CONTRACT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT UNQ_TPAYROLLS_0
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_MECHANIC_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_VEHICLE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_INVOICE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT UNQ_TWORKORDERS_0
ALTER TABLE TCreditcards DROP CONSTRAINT FK_TCreditcards_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_MECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT UNQ_TCONTRACT_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TMechanics DROP CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TPAYROLLS
DROP TABLE TClients
DROP TABLE TPROFESSIONALGROUPS
DROP TABLE TVehicletypes
DROP TABLE TWORKORDERS
DROP TABLE TCreditcards
DROP TABLE TInvoices
DROP TABLE TCONTRACTTYPES
DROP TABLE TSpareparts
DROP TABLE TCONTRACT
DROP TABLE TVouchers
DROP TABLE TSubstitutions
DROP TABLE TCashes
DROP TABLE TCharges
DROP TABLE TVehicles
DROP TABLE TMechanics
CREATE TABLE TInterventions (ID VARCHAR(36) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(36), WORKORDER_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(36) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPAYROLLS (ID VARCHAR(36) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPROFESSIONALGROUPS (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicletypes (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TWORKORDERS (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATE VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), VEHICLE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCreditcards (ID VARCHAR(36) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATE VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACTTYPES (ID VARCHAR(36) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(36) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACT (ID VARCHAR(36) NOT NULL, ANNUALWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), PROFESSIONALGROUP_ID VARCHAR(36), FIREDMECHANIC_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(36) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(36) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(36), SPAREPART_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(36) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(36) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(36), PAYMENTMEAN_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(36) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(36), VEHICLETYPE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, INFORCECONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (DATE, MECHANIC_ID, WORKORDER_ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_2 UNIQUE (DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TPROFESSIONALGROUPS ADD CONSTRAINT UNQ_TPROFESSIONALGROUPS_1 UNIQUE (NAME)
ALTER TABLE TVehicletypes ADD CONSTRAINT UNQ_TVehicletypes_1 UNIQUE (NAME)
ALTER TABLE TWORKORDERS ADD CONSTRAINT UNQ_TWORKORDERS_0 UNIQUE (DATE, VEHICLE_ID)
ALTER TABLE TCreditcards ADD CONSTRAINT UNQ_TCreditcards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TCONTRACTTYPES ADD CONSTRAINT UNQ_TCONTRACTTYPES_2 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TCONTRACT ADD CONSTRAINT UNQ_TCONTRACT_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (PAYMENTMEAN_ID, INVOICE_ID)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWORKORDERS (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT FK_TPAYROLLS_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TCONTRACT (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TCreditcards ADD CONSTRAINT FK_TCreditcards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TPROFESSIONALGROUPS (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TCONTRACTTYPES (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicletypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TMechanics ADD CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID FOREIGN KEY (INFORCECONTRACT_ID) REFERENCES TCONTRACT (ID)
INSERT INTO TCONTRACTTYPES VALUES('579d8957-46ba-44c6-a767-7fc0bc8df4b5',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('3eac9c80-de83-405f-8583-3efe5ae927d0','mechanic-dni','noName','noSurname',1,NULL)
INSERT INTO TPROFESSIONALGROUPS VALUES('a59c2443-f06c-4e78-9189-9476993eec77','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACT VALUES('f75bf752-391d-4400-8ea4-bd1b9db573b7',3000.0E0,'2022-11-17',0.0E0,'2022-11-16','IN_FORCE',1,'579d8957-46ba-44c6-a767-7fc0bc8df4b5','3eac9c80-de83-405f-8583-3efe5ae927d0','a59c2443-f06c-4e78-9189-9476993eec77',NULL)
DELETE FROM TMECHANICS WHERE ID='3eac9c80-de83-405f-8583-3efe5ae927d0'
INSERT INTO TMECHANICS VALUES('3eac9c80-de83-405f-8583-3efe5ae927d0','mechanic-dni','noName','noSurname',1,'f75bf752-391d-4400-8ea4-bd1b9db573b7')
COMMIT
DISCONNECT
/*C32*/SET SCHEMA PUBLIC
DISCONNECT
/*C33*/SET SCHEMA PUBLIC
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT FK_TPAYROLLS_CONTRACT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT UNQ_TPAYROLLS_0
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_MECHANIC_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_VEHICLE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_INVOICE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT UNQ_TWORKORDERS_0
ALTER TABLE TCreditcards DROP CONSTRAINT FK_TCreditcards_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_MECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT UNQ_TCONTRACT_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TMechanics DROP CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TPAYROLLS
DROP TABLE TClients
DROP TABLE TPROFESSIONALGROUPS
DROP TABLE TVehicletypes
DROP TABLE TWORKORDERS
DROP TABLE TCreditcards
DROP TABLE TInvoices
DROP TABLE TCONTRACTTYPES
DROP TABLE TSpareparts
DROP TABLE TCONTRACT
DROP TABLE TVouchers
DROP TABLE TSubstitutions
DROP TABLE TCashes
DROP TABLE TCharges
DROP TABLE TVehicles
DROP TABLE TMechanics
CREATE TABLE TInterventions (ID VARCHAR(36) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(36), WORKORDER_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(36) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPAYROLLS (ID VARCHAR(36) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPROFESSIONALGROUPS (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicletypes (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TWORKORDERS (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATE VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), VEHICLE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCreditcards (ID VARCHAR(36) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATE VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACTTYPES (ID VARCHAR(36) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(36) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACT (ID VARCHAR(36) NOT NULL, ANNUALWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), PROFESSIONALGROUP_ID VARCHAR(36), FIREDMECHANIC_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(36) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(36) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(36), SPAREPART_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(36) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(36) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(36), PAYMENTMEAN_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(36) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(36), VEHICLETYPE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, INFORCECONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (DATE, MECHANIC_ID, WORKORDER_ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_2 UNIQUE (DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TPROFESSIONALGROUPS ADD CONSTRAINT UNQ_TPROFESSIONALGROUPS_1 UNIQUE (NAME)
ALTER TABLE TVehicletypes ADD CONSTRAINT UNQ_TVehicletypes_1 UNIQUE (NAME)
ALTER TABLE TWORKORDERS ADD CONSTRAINT UNQ_TWORKORDERS_0 UNIQUE (DATE, VEHICLE_ID)
ALTER TABLE TCreditcards ADD CONSTRAINT UNQ_TCreditcards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TCONTRACTTYPES ADD CONSTRAINT UNQ_TCONTRACTTYPES_2 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TCONTRACT ADD CONSTRAINT UNQ_TCONTRACT_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (PAYMENTMEAN_ID, INVOICE_ID)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWORKORDERS (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT FK_TPAYROLLS_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TCONTRACT (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TCreditcards ADD CONSTRAINT FK_TCreditcards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TPROFESSIONALGROUPS (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TCONTRACTTYPES (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicletypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TMechanics ADD CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID FOREIGN KEY (INFORCECONTRACT_ID) REFERENCES TCONTRACT (ID)
INSERT INTO TCONTRACTTYPES VALUES('a17d21de-d886-42ae-ac01-119063d0b200',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('74929cf9-b563-43cf-b884-1bc2c6809003','mechanic-dni','noName','noSurname',1,NULL)
INSERT INTO TPROFESSIONALGROUPS VALUES('9a42de8e-adbb-465c-8a28-856b7adcd518','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACT VALUES('962010c9-8fd3-44e6-8bf4-b724f66f698d',3000.0E0,'2022-11-17',0.0E0,'2022-11-16','IN_FORCE',1,'a17d21de-d886-42ae-ac01-119063d0b200','74929cf9-b563-43cf-b884-1bc2c6809003','9a42de8e-adbb-465c-8a28-856b7adcd518',NULL)
DELETE FROM TMECHANICS WHERE ID='74929cf9-b563-43cf-b884-1bc2c6809003'
INSERT INTO TMECHANICS VALUES('74929cf9-b563-43cf-b884-1bc2c6809003','mechanic-dni','noName','noSurname',1,'962010c9-8fd3-44e6-8bf4-b724f66f698d')
COMMIT
DISCONNECT
/*C34*/SET SCHEMA PUBLIC
DISCONNECT
/*C35*/SET SCHEMA PUBLIC
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT FK_TPAYROLLS_CONTRACT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT UNQ_TPAYROLLS_0
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_MECHANIC_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_VEHICLE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_INVOICE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT UNQ_TWORKORDERS_0
ALTER TABLE TCreditcards DROP CONSTRAINT FK_TCreditcards_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_MECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT UNQ_TCONTRACT_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TMechanics DROP CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TPAYROLLS
DROP TABLE TClients
DROP TABLE TPROFESSIONALGROUPS
DROP TABLE TVehicletypes
DROP TABLE TWORKORDERS
DROP TABLE TCreditcards
DROP TABLE TInvoices
DROP TABLE TCONTRACTTYPES
DROP TABLE TSpareparts
DROP TABLE TCONTRACT
DROP TABLE TVouchers
DROP TABLE TSubstitutions
DROP TABLE TCashes
DROP TABLE TCharges
DROP TABLE TVehicles
DROP TABLE TMechanics
CREATE TABLE TInterventions (ID VARCHAR(36) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(36), WORKORDER_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(36) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPAYROLLS (ID VARCHAR(36) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPROFESSIONALGROUPS (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicletypes (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TWORKORDERS (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATE VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), VEHICLE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCreditcards (ID VARCHAR(36) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATE VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACTTYPES (ID VARCHAR(36) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(36) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACT (ID VARCHAR(36) NOT NULL, ANNUALWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), PROFESSIONALGROUP_ID VARCHAR(36), FIREDMECHANIC_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(36) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(36) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(36), SPAREPART_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(36) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(36) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(36), PAYMENTMEAN_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(36) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(36), VEHICLETYPE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, INFORCECONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (DATE, MECHANIC_ID, WORKORDER_ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_2 UNIQUE (DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TPROFESSIONALGROUPS ADD CONSTRAINT UNQ_TPROFESSIONALGROUPS_1 UNIQUE (NAME)
ALTER TABLE TVehicletypes ADD CONSTRAINT UNQ_TVehicletypes_1 UNIQUE (NAME)
ALTER TABLE TWORKORDERS ADD CONSTRAINT UNQ_TWORKORDERS_0 UNIQUE (DATE, VEHICLE_ID)
ALTER TABLE TCreditcards ADD CONSTRAINT UNQ_TCreditcards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TCONTRACTTYPES ADD CONSTRAINT UNQ_TCONTRACTTYPES_2 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TCONTRACT ADD CONSTRAINT UNQ_TCONTRACT_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (PAYMENTMEAN_ID, INVOICE_ID)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWORKORDERS (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT FK_TPAYROLLS_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TCONTRACT (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TCreditcards ADD CONSTRAINT FK_TCreditcards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TPROFESSIONALGROUPS (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TCONTRACTTYPES (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicletypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TMechanics ADD CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID FOREIGN KEY (INFORCECONTRACT_ID) REFERENCES TCONTRACT (ID)
INSERT INTO TCONTRACTTYPES VALUES('1425eb24-d79a-412f-b9d6-e0c2743bfa4d',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('6b5e2645-1c18-4ccd-a5a2-f91b97014dda','mechanic-dni','noName','noSurname',1,NULL)
INSERT INTO TPROFESSIONALGROUPS VALUES('c13c012d-5950-4375-8ce4-0c10ed1f7826','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACT VALUES('e5ebc93d-9d7d-49d2-b57e-6b6afcf2835b',3000.0E0,'2022-11-17',0.0E0,'2022-11-16','IN_FORCE',1,'1425eb24-d79a-412f-b9d6-e0c2743bfa4d','6b5e2645-1c18-4ccd-a5a2-f91b97014dda','c13c012d-5950-4375-8ce4-0c10ed1f7826',NULL)
DELETE FROM TMECHANICS WHERE ID='6b5e2645-1c18-4ccd-a5a2-f91b97014dda'
INSERT INTO TMECHANICS VALUES('6b5e2645-1c18-4ccd-a5a2-f91b97014dda','mechanic-dni','noName','noSurname',1,'e5ebc93d-9d7d-49d2-b57e-6b6afcf2835b')
COMMIT
DISCONNECT
/*C36*/SET SCHEMA PUBLIC
DISCONNECT
/*C37*/SET SCHEMA PUBLIC
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT FK_TPAYROLLS_CONTRACT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT UNQ_TPAYROLLS_0
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_MECHANIC_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_VEHICLE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_INVOICE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT UNQ_TWORKORDERS_0
ALTER TABLE TCreditcards DROP CONSTRAINT FK_TCreditcards_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_MECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT UNQ_TCONTRACT_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TMechanics DROP CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TPAYROLLS
DROP TABLE TClients
DROP TABLE TPROFESSIONALGROUPS
DROP TABLE TVehicletypes
DROP TABLE TWORKORDERS
DROP TABLE TCreditcards
DROP TABLE TInvoices
DROP TABLE TCONTRACTTYPES
DROP TABLE TSpareparts
DROP TABLE TCONTRACT
DROP TABLE TVouchers
DROP TABLE TSubstitutions
DROP TABLE TCashes
DROP TABLE TCharges
DROP TABLE TVehicles
DROP TABLE TMechanics
CREATE TABLE TInterventions (ID VARCHAR(36) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(36), WORKORDER_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(36) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPAYROLLS (ID VARCHAR(36) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPROFESSIONALGROUPS (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicletypes (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TWORKORDERS (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATE VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), VEHICLE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCreditcards (ID VARCHAR(36) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATE VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACTTYPES (ID VARCHAR(36) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(36) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACT (ID VARCHAR(36) NOT NULL, ANNUALWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), PROFESSIONALGROUP_ID VARCHAR(36), FIREDMECHANIC_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(36) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(36) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(36), SPAREPART_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(36) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(36) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(36), PAYMENTMEAN_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(36) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(36), VEHICLETYPE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, INFORCECONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (DATE, MECHANIC_ID, WORKORDER_ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_2 UNIQUE (DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TPROFESSIONALGROUPS ADD CONSTRAINT UNQ_TPROFESSIONALGROUPS_1 UNIQUE (NAME)
ALTER TABLE TVehicletypes ADD CONSTRAINT UNQ_TVehicletypes_1 UNIQUE (NAME)
ALTER TABLE TWORKORDERS ADD CONSTRAINT UNQ_TWORKORDERS_0 UNIQUE (DATE, VEHICLE_ID)
ALTER TABLE TCreditcards ADD CONSTRAINT UNQ_TCreditcards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TCONTRACTTYPES ADD CONSTRAINT UNQ_TCONTRACTTYPES_2 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TCONTRACT ADD CONSTRAINT UNQ_TCONTRACT_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (PAYMENTMEAN_ID, INVOICE_ID)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWORKORDERS (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT FK_TPAYROLLS_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TCONTRACT (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TCreditcards ADD CONSTRAINT FK_TCreditcards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TPROFESSIONALGROUPS (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TCONTRACTTYPES (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicletypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TMechanics ADD CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID FOREIGN KEY (INFORCECONTRACT_ID) REFERENCES TCONTRACT (ID)
INSERT INTO TCONTRACTTYPES VALUES('381fd037-1013-4cd0-a6e0-9c0af8565c57',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('56a3de0e-efa1-4952-add7-a4dac5519253','mechanic-dni','noName','noSurname',1,NULL)
INSERT INTO TPROFESSIONALGROUPS VALUES('28fbb125-3bfc-43e3-964e-22f8fe8eaa8e','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACT VALUES('06efbeae-f896-4973-bd63-b26cef61067b',3000.0E0,'2022-11-17',0.0E0,'2022-11-16','IN_FORCE',1,'381fd037-1013-4cd0-a6e0-9c0af8565c57','56a3de0e-efa1-4952-add7-a4dac5519253','28fbb125-3bfc-43e3-964e-22f8fe8eaa8e',NULL)
DELETE FROM TMECHANICS WHERE ID='56a3de0e-efa1-4952-add7-a4dac5519253'
INSERT INTO TMECHANICS VALUES('56a3de0e-efa1-4952-add7-a4dac5519253','mechanic-dni','noName','noSurname',1,'06efbeae-f896-4973-bd63-b26cef61067b')
INSERT INTO TPAYROLLS VALUES('4ac9855a-2161-4ad2-8765-22dc914e84a7',0.0E0,'2022-11-16',40.714285714285715E0,214.28571428571428E0,12.5E0,0.0E0,0.0E0,1,'06efbeae-f896-4973-bd63-b26cef61067b')
COMMIT
DISCONNECT
/*C38*/SET SCHEMA PUBLIC
DISCONNECT
/*C39*/SET SCHEMA PUBLIC
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_MECHANIC_ID
ALTER TABLE TInterventions DROP CONSTRAINT FK_TInterventions_WORKORDER_ID
ALTER TABLE TInterventions DROP CONSTRAINT UNQ_TInterventions_0
ALTER TABLE TPaymentmeans DROP CONSTRAINT FK_TPaymentmeans_CLIENT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT FK_TPAYROLLS_CONTRACT_ID
ALTER TABLE TPAYROLLS DROP CONSTRAINT UNQ_TPAYROLLS_0
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_MECHANIC_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_VEHICLE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_INVOICE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT UNQ_TWORKORDERS_0
ALTER TABLE TCreditcards DROP CONSTRAINT FK_TCreditcards_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_MECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID
ALTER TABLE TCONTRACT DROP CONSTRAINT UNQ_TCONTRACT_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_SPAREPART_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT FK_TSubstitutions_INTERVENTION_ID
ALTER TABLE TSubstitutions DROP CONSTRAINT UNQ_TSubstitutions_0
ALTER TABLE TCashes DROP CONSTRAINT FK_TCashes_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_PAYMENTMEAN_ID
ALTER TABLE TCharges DROP CONSTRAINT FK_TCharges_INVOICE_ID
ALTER TABLE TCharges DROP CONSTRAINT UNQ_TCharges_0
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_VEHICLETYPE_ID
ALTER TABLE TVehicles DROP CONSTRAINT FK_TVehicles_CLIENT_ID
ALTER TABLE TMechanics DROP CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID
DROP TABLE TInterventions
DROP TABLE TPaymentmeans
DROP TABLE TPAYROLLS
DROP TABLE TClients
DROP TABLE TPROFESSIONALGROUPS
DROP TABLE TVehicletypes
DROP TABLE TWORKORDERS
DROP TABLE TCreditcards
DROP TABLE TInvoices
DROP TABLE TCONTRACTTYPES
DROP TABLE TSpareparts
DROP TABLE TCONTRACT
DROP TABLE TVouchers
DROP TABLE TSubstitutions
DROP TABLE TCashes
DROP TABLE TCharges
DROP TABLE TVehicles
DROP TABLE TMechanics
CREATE TABLE TInterventions (ID VARCHAR(36) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(36), WORKORDER_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPaymentmeans (ID VARCHAR(36) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TPAYROLLS (ID VARCHAR(36) NOT NULL, BONUS REAL, DATE DATE, INCOMETAX REAL, MONTHLYWAGE REAL, NIC REAL, PRODUCTIVITYBONUS REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, CONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TClients (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TPROFESSIONALGROUPS (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRODUCTIVITYBONUSPERCENTAGE REAL, TRIENNIUMPAYMENT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TVehicletypes (ID VARCHAR(36) NOT NULL, NAME VARCHAR(255), PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TWORKORDERS (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATE VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), VEHICLE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCreditcards (ID VARCHAR(36) NOT NULL, NUMBER VARCHAR(255), TYPE VARCHAR(255), VALIDTHRU DATE, PRIMARY KEY (ID))
CREATE TABLE TInvoices (ID VARCHAR(36) NOT NULL, AMOUNT REAL, DATE DATE, NUMBER BIGINT, STATE VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACTTYPES (ID VARCHAR(36) NOT NULL, COMPENSATIONDAYS REAL, NAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSpareparts (ID VARCHAR(36) NOT NULL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCONTRACT (ID VARCHAR(36) NOT NULL, ANNUALWAGE REAL, ENDDATE DATE, SETTLEMENT REAL, STARTDATE DATE, STATE VARCHAR(255), VERSION BIGINT, CONTRACTTYPE_ID VARCHAR(36), MECHANIC_ID VARCHAR(36), PROFESSIONALGROUP_ID VARCHAR(36), FIREDMECHANIC_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(36) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TSubstitutions (ID VARCHAR(36) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(36), SPAREPART_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TCashes (ID VARCHAR(36) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TCharges (ID VARCHAR(36) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(36), PAYMENTMEAN_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TVehicles (ID VARCHAR(36) NOT NULL, BRAND VARCHAR(255), MODEL VARCHAR(255), PLATENUMBER VARCHAR(255), VERSION BIGINT, CLIENT_ID VARCHAR(36), VEHICLETYPE_ID VARCHAR(36), PRIMARY KEY (ID))
CREATE TABLE TMechanics (ID VARCHAR(36) NOT NULL, DNI VARCHAR(255), NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, INFORCECONTRACT_ID VARCHAR(36), PRIMARY KEY (ID))
ALTER TABLE TInterventions ADD CONSTRAINT UNQ_TInterventions_0 UNIQUE (DATE, MECHANIC_ID, WORKORDER_ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_0 UNIQUE (CONTRACT_ID, DATE)
ALTER TABLE TPAYROLLS ADD CONSTRAINT UNQ_TPAYROLLS_2 UNIQUE (DATE)
ALTER TABLE TClients ADD CONSTRAINT UNQ_TClients_1 UNIQUE (DNI)
ALTER TABLE TPROFESSIONALGROUPS ADD CONSTRAINT UNQ_TPROFESSIONALGROUPS_1 UNIQUE (NAME)
ALTER TABLE TVehicletypes ADD CONSTRAINT UNQ_TVehicletypes_1 UNIQUE (NAME)
ALTER TABLE TWORKORDERS ADD CONSTRAINT UNQ_TWORKORDERS_0 UNIQUE (DATE, VEHICLE_ID)
ALTER TABLE TCreditcards ADD CONSTRAINT UNQ_TCreditcards_1 UNIQUE (NUMBER)
ALTER TABLE TInvoices ADD CONSTRAINT UNQ_TInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TCONTRACTTYPES ADD CONSTRAINT UNQ_TCONTRACTTYPES_2 UNIQUE (NAME)
ALTER TABLE TSpareparts ADD CONSTRAINT UNQ_TSpareparts_1 UNIQUE (CODE)
ALTER TABLE TCONTRACT ADD CONSTRAINT UNQ_TCONTRACT_0 UNIQUE (MECHANIC_ID, STARTDATE, FIREDMECHANIC_ID)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE TSubstitutions ADD CONSTRAINT UNQ_TSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE TCharges ADD CONSTRAINT UNQ_TCharges_0 UNIQUE (PAYMENTMEAN_ID, INVOICE_ID)
ALTER TABLE TVehicles ADD CONSTRAINT UNQ_TVehicles_3 UNIQUE (PLATENUMBER)
ALTER TABLE TMechanics ADD CONSTRAINT UNQ_TMechanics_1 UNIQUE (DNI)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TInterventions ADD CONSTRAINT FK_TInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWORKORDERS (ID)
ALTER TABLE TPaymentmeans ADD CONSTRAINT FK_TPaymentmeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TPAYROLLS ADD CONSTRAINT FK_TPAYROLLS_CONTRACT_ID FOREIGN KEY (CONTRACT_ID) REFERENCES TCONTRACT (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES TVehicles (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TCreditcards ADD CONSTRAINT FK_TCreditcards_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_PROFESSIONALGROUP_ID FOREIGN KEY (PROFESSIONALGROUP_ID) REFERENCES TPROFESSIONALGROUPS (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_CONTRACTTYPE_ID FOREIGN KEY (CONTRACTTYPE_ID) REFERENCES TCONTRACTTYPES (ID)
ALTER TABLE TCONTRACT ADD CONSTRAINT FK_TCONTRACT_FIREDMECHANIC_ID FOREIGN KEY (FIREDMECHANIC_ID) REFERENCES TMechanics (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSpareparts (ID)
ALTER TABLE TSubstitutions ADD CONSTRAINT FK_TSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES TInterventions (ID)
ALTER TABLE TCashes ADD CONSTRAINT FK_TCashes_ID FOREIGN KEY (ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES TPaymentmeans (ID)
ALTER TABLE TCharges ADD CONSTRAINT FK_TCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES TInvoices (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES TVehicletypes (ID)
ALTER TABLE TVehicles ADD CONSTRAINT FK_TVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES TClients (ID)
ALTER TABLE TMechanics ADD CONSTRAINT FK_TMechanics_INFORCECONTRACT_ID FOREIGN KEY (INFORCECONTRACT_ID) REFERENCES TCONTRACT (ID)
INSERT INTO TCONTRACTTYPES VALUES('f59494db-ba78-43f0-80ba-99da1f3b168b',2.0E0,'contract-type-name',1)
INSERT INTO TMECHANICS VALUES('37fb7e67-56f5-4b0b-bae7-653c5346c463','mechanic-dni','noName','noSurname',1,NULL)
INSERT INTO TPROFESSIONALGROUPS VALUES('675f7956-3e4b-4522-89b7-cb5686cacc1f','professional-group-name',10.0E0,300.0E0,1)
INSERT INTO TCONTRACT VALUES('77e2494c-f589-48db-b18b-59870eed7fda',3000.0E0,'2022-11-17',0.0E0,'2022-11-16','IN_FORCE',1,'f59494db-ba78-43f0-80ba-99da1f3b168b','37fb7e67-56f5-4b0b-bae7-653c5346c463','675f7956-3e4b-4522-89b7-cb5686cacc1f',NULL)
DELETE FROM TMECHANICS WHERE ID='37fb7e67-56f5-4b0b-bae7-653c5346c463'
INSERT INTO TMECHANICS VALUES('37fb7e67-56f5-4b0b-bae7-653c5346c463','mechanic-dni','noName','noSurname',1,'77e2494c-f589-48db-b18b-59870eed7fda')
INSERT INTO TPAYROLLS VALUES('0176c11f-be83-44fd-8e94-d44607ffca43',0.0E0,'2022-11-16',40.714285714285715E0,214.28571428571428E0,12.5E0,0.0E0,0.0E0,1,'77e2494c-f589-48db-b18b-59870eed7fda')
COMMIT
DISCONNECT
